<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Main</title>
		<link rel="stylesheet" href="src/assets/style.css">
	</head>
	<body>
		<div id="other" style="width: 100%, height: 500px; background-color: red;"><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p></div>
		<div id="mount" style="overflow: scroll;"></div>
		<div id="other" style="width: 100%, height: 500px; background-color: red;"><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p><p>yo</p></div>
		<script src="elm.js" type="text/javascript"></script>
		<script type="text/javascript">

			var mount = document.getElementById("mount");

			var mountedApp = Elm.embed(Elm.Main, mount, { sendStoryHeight: 0, sendTop: 0 })

			getStoryHeight = function() {
				var story = document.getElementById("story");
				if (typeof story !== "undefined" && story !== null) {
					mountedApp.ports.sendStoryHeight.send(story.scrollHeight);
				}
			};

			getTop = function() {
				var top = document.getElementById("mount").getBoundingClientRect().top
				mountedApp.ports.sendTop.send(top);
			};

			scrollParent = function(scrollAmount) {
				var currentTop = document.body.scrollTop;
				document.body.scrollTop = currentTop + scrollAmount;
			}

			mountedApp.ports.requestStoryHeight.subscribe(getStoryHeight);
			mountedApp.ports.requestTop.subscribe(getTop);
			mountedApp.ports.scrollParent.subscribe(scrollParent);

		</script>
	</body>
</html>
